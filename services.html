<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Services - Glow & Bloom Beauty</title>
    <link rel="stylesheet" href="style.css" />
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Feather icons -->
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <style>
        /* Additional styles for enhanced header and spacing */
        .enhanced-header {
            padding-top: 100px;
            padding-bottom: 60px;
        }
        
        .enhanced-title {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
        }
        
        @media (max-width: 768px) {
            .enhanced-header {
                padding-top: 80px;
                padding-bottom: 40px;
            }
            
            .enhanced-title {
                font-size: 2.5rem;
            }
        }

        /* Custom filter button styles with #8B3A3A color */
        .filter-btn {
            padding: 0.5rem 1.5rem;
            border-radius: 9999px;
            border: 1px solid #d1d5db;
            color: #374151;
            font-weight: 500;
            transition: all 0.2s;
            font-size: 0.875rem;
        }

        .filter-btn:hover {
            border-color: #8B3A3A;
            color: #8B3A3A;
        }

        .filter-btn.active {
            background-color: #8B3A3A;
            color: #fff;
            border-color: #8B3A3A;
        }

        /* Service variation styles */
        .variation-option {
            transition: all 0.3s ease;
        }
        
        .variation-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .variation-option.selected {
            border-color: #8B3A3A;
            background-color: #fdf2f8;
        }

        /* Cart badge */
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #8B3A3A;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
        }

        /* Selected services panel - FIXED POSITIONING */
        #selected-services-panel {
            transition: transform 0.3s ease;
            z-index: 9999;
        }
        
        #selected-services-panel.hidden {
            transform: translateX(100%);
        }

        /* Cart toggle button z-index */
        #cart-toggle {
            z-index: 9998;
        }

        /* Modal z-index */
        #service-modal {
            z-index: 10000;
        }
    </style>
</head>

<body class="font-montserrat bg-white text-gray-800">
    <custom-navbar></custom-navbar>

    <main>
        <!-- Services Header - ENHANCED SECTION -->
        <section class="relative enhanced-header bg-gradient-to-r from-pink-50 to-purple-50">
            <div class="max-w-7xl mx-auto px-6 text-center">
                <h1 class="enhanced-title font-playfair font-bold mb-4">Our Premium Services</h1>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    Experience luxury beauty treatments performed by our certified experts. 
                    Discover your natural radiance with our personalized services.
                </p>
            </div>
        </section>

        <!-- Services Filter -->
        <section class="py-6 bg-white border-b">
            <div class="max-w-7xl mx-auto px-6">
                <div class="flex flex-wrap gap-3 justify-center">
                    <button class="filter-btn active px-4 py-2 text-sm" data-filter="all">All Services</button>
                    <button class="filter-btn px-4 py-2 text-sm" data-filter="hair">Hair Services</button>
                    <button class="filter-btn px-4 py-2 text-sm" data-filter="nails">Nail Services</button>
                    <button class="filter-btn px-4 py-2 text-sm" data-filter="makeup">Makeup</button>
                    <button class="filter-btn px-4 py-2 text-sm" data-filter="skincare">Skin Care</button>
                    <button class="filter-btn px-4 py-2 text-sm" data-filter="grooming">Grooming</button>
                </div>
            </div>
        </section>

        <!-- Services Grid -->
        <section class="py-12 px-6 max-w-7xl mx-auto">
            <div id="services-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Services will be dynamically loaded here from MongoDB -->
            </div>
        </section>

        <!-- Service Details Modal -->
        <div id="service-modal" class="fixed inset-0 bg-black bg-opacity-50 z-[10000] hidden">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-6">
                            <h2 id="modal-title" class="text-3xl font-playfair font-bold"></h2>
                            <button id="close-modal" class="text-gray-500 hover:text-gray-700">
                                <i data-feather="x" class="w-6 h-6"></i>
                            </button>
                        </div>
                        
                        <div class="grid md:grid-cols-2 gap-8">
                            <div>
                                <img id="modal-image" src="" alt="" class="w-full h-80 object-cover rounded-xl shadow-lg">
                                <div class="flex items-center mt-4">
                                    <span id="modal-rating" class="flex items-center text-yellow-400 mr-4"></span>
                                    <span id="modal-duration" class="text-gray-500"></span>
                                </div>
                            </div>
                            
                            <div>
                                <div class="flex items-center gap-4 mb-4">
                                    <span id="modal-price" class="text-3xl font-bold text-[#8B3A3A]"></span>
                                </div>
                                
                                <p id="modal-description" class="text-gray-600 mb-6"></p>
                                
                                <div class="space-y-4">
                                    <div>
                                        <h4 class="font-semibold mb-2">Key Benefits</h4>
                                        <ul id="modal-benefits" class="list-disc list-inside text-gray-600 space-y-1"></ul>
                                    </div>
                                    
                                    <!-- Service Variations -->
                                    <div id="variations-section" class="hidden">
                                        <h4 class="font-semibold mb-2">Service Options</h4>
                                        <div id="variations-container" class="space-y-3">
                                            <!-- Variations will be dynamically added here -->
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center gap-4">
                                        <label class="font-semibold">Quantity:</label>
                                        <div class="flex items-center border rounded-lg">
                                            <button type="button" id="decrease-qty" class="px-3 py-2 text-gray-600 hover:text-[#8B3A3A]">-</button>
                                            <span id="service-qty" class="px-3 py-2">1</span>
                                            <button type="button" id="increase-qty" class="px-3 py-2 text-gray-600 hover:text-[#8B3A3A]">+</button>
                                        </div>
                                    </div>
                                    
                                    <div class="flex gap-4 mt-6">
                                        <button id="add-to-cart-modal" class="flex-1 bg-[#8B3A3A] text-white py-3 rounded-lg font-semibold hover:bg-[#6B2A2A] transition-colors">
                                            Add to Booking
                                        </button>
                                        <a href="contact.html" id="book-now-btn" class="px-6 py-3 border border-[#8B3A3A] text-[#8B3A3A] rounded-lg hover:bg-[#fdf2f8] transition-colors flex items-center">
                                            Book Now
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Selected Services Panel - FIXED: Starts below navbar like products cart -->
        <div id="selected-services-panel" class="fixed top-16 right-0 h-[calc(100vh-4rem)] w-96 bg-white shadow-2xl z-[9999] transform transition-transform duration-300 hidden">
            <div class="p-6 h-full flex flex-col">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-playfair font-bold">Your Selected Services</h3>
                    <button id="close-panel" class="text-gray-500 hover:text-gray-700 p-1">
                        <i data-feather="x" class="w-6 h-6"></i>
                    </button>
                </div>
                
                <div id="selected-services-list" class="flex-1 overflow-y-auto mb-4">
                    <!-- Selected services will appear here -->
                    <div id="empty-cart-message" class="text-center text-gray-500 py-8">
                        <i data-feather="shopping-cart" class="w-12 h-12 mx-auto mb-2 opacity-50"></i>
                        <p>No services selected yet</p>
                    </div>
                </div>
                
                <div class="border-t pt-4">
                    <div class="flex justify-between mb-4 text-lg">
                        <span class="font-bold">Total:</span>
                        <span id="cart-total" class="font-bold text-[#8B3A3A]">$0.00</span>
                    </div>
                    <a href="contact.html" id="proceed-to-booking" class="w-full bg-[#8B3A3A] text-white py-3 rounded-lg font-semibold hover:bg-[#6B2A2A] transition-colors block text-center mb-2">
                        Proceed to Booking
                    </a>
                    <button id="clear-cart" class="w-full text-gray-500 hover:text-gray-700 text-sm">
                        Clear All
                    </button>
                </div>
            </div>
        </div>

        <!-- Cart Toggle Button -->
        <button id="cart-toggle" class="fixed bottom-6 right-6 bg-[#8B3A3A] text-white p-4 rounded-full shadow-lg z-[9998] hover:bg-[#6B2A2A] transition-colors">
            <i data-feather="shopping-cart" class="w-6 h-6"></i>
            <span id="cart-count" class="cart-badge hidden">0</span>
        </button>

        <!-- CTA Section -->
        <section class="py-16 bg-gradient-to-r from-pink-50 to-purple-50">
            <div class="max-w-4xl mx-auto text-center px-6">
                <h2 class="text-3xl md:text-4xl font-playfair font-bold mb-6">Ready to Experience Luxury Beauty?</h2>
                <p class="text-xl text-gray-600 mb-8">
                    Book your consultation today and let our experts help you discover your best self.
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="contact.html" class="bg-[#8B3A3A] text-white px-8 py-3 rounded-lg font-semibold hover:bg-[#6B2A2A] transition-colors">
                        Contact Us
                    </a>
                    <a href="tel:+1234567890" class="border border-[#8B3A3A] text-[#8B3A3A] px-8 py-3 rounded-lg font-semibold hover:bg-[#8B3A3A] hover:text-white transition-colors">
                        Call Now
                    </a>
                </div>
            </div>
        </section>
    </main>

    <custom-footer></custom-footer>

    <script src="components/navbar.js"></script>
    <script src="components/footer.js"></script>
    <script src="services.js"></script>
    <script>
        // Services page functionality
        document.addEventListener("DOMContentLoaded", () => {
            // Initialize feather icons
            if (typeof feather !== 'undefined') {
                feather.replace();
            }

            // Cart functionality
            const cartToggle = document.getElementById('cart-toggle');
            const selectedServicesPanel = document.getElementById('selected-services-panel');
            const closePanel = document.getElementById('close-panel');
            const clearCartBtn = document.getElementById('clear-cart');
            const cartCount = document.getElementById('cart-count');
            const proceedToBooking = document.getElementById('proceed-to-booking');
            
            // Toggle cart panel
            cartToggle.addEventListener('click', () => {
                selectedServicesPanel.classList.toggle('hidden');
            });
            
            closePanel.addEventListener('click', () => {
                selectedServicesPanel.classList.add('hidden');
            });
            
            // Clear cart
            clearCartBtn.addEventListener('click', () => {
                if (confirm('Are you sure you want to clear all selected services?')) {
                    localStorage.removeItem('selectedServices');
                    updateCartDisplay();
                }
            });
            
            // Update cart display
            function updateCartDisplay() {
                const selectedServices = JSON.parse(localStorage.getItem('selectedServices') || '[]');
                const servicesList = document.getElementById('selected-services-list');
                const emptyCartMessage = document.getElementById('empty-cart-message');
                const cartTotal = document.getElementById('cart-total');
                
                // Update cart count
                const totalItems = selectedServices.reduce((sum, service) => sum + service.quantity, 0);
                if (totalItems > 0) {
                    cartCount.textContent = totalItems;
                    cartCount.classList.remove('hidden');
                } else {
                    cartCount.classList.add('hidden');
                }
                
                // Update services list
                if (selectedServices.length === 0) {
                    emptyCartMessage.classList.remove('hidden');
                    servicesList.innerHTML = '';
                    servicesList.appendChild(emptyCartMessage);
                    cartTotal.textContent = '$0.00';
                    proceedToBooking.classList.add('opacity-50', 'cursor-not-allowed');
                    proceedToBooking.removeAttribute('href');
                    return;
                }
                
                emptyCartMessage.classList.add('hidden');
                proceedToBooking.classList.remove('opacity-50', 'cursor-not-allowed');
                proceedToBooking.setAttribute('href', 'contact.html');
                
                let total = 0;
                servicesList.innerHTML = '';
                
                selectedServices.forEach((service, index) => {
                    const serviceTotal = service.price * service.quantity;
                    total += serviceTotal;
                    
                    const serviceElement = document.createElement('div');
                    serviceElement.className = 'border-b border-gray-200 pb-3 mb-3';
                    serviceElement.innerHTML = `
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-800">${service.name}</h4>
                                ${service.variation ? `<p class="text-sm text-gray-600 mt-1">${service.variation}</p>` : ''}
                                <div class="flex items-center justify-between mt-2">
                                    <p class="text-sm text-gray-500">Qty: ${service.quantity}</p>
                                    <p class="text-sm font-semibold text-[#8B3A3A]">$${serviceTotal.toFixed(2)}</p>
                                </div>
                            </div>
                            <button class="remove-service text-red-500 hover:text-red-700 ml-3 p-1" data-index="${index}">
                                <i data-feather="trash-2" class="w-4 h-4"></i>
                            </button>
                        </div>
                    `;
                    servicesList.appendChild(serviceElement);
                });
                
                cartTotal.textContent = `$${total.toFixed(2)}`;
                
                // Add event listeners to remove buttons
                document.querySelectorAll('.remove-service').forEach(button => {
                    button.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        removeServiceFromCart(index);
                    });
                });
                
                // Refresh feather icons
                if (typeof feather !== 'undefined') {
                    feather.replace();
                }
            }
            
            // Remove service from cart
            function removeServiceFromCart(index) {
                const selectedServices = JSON.parse(localStorage.getItem('selectedServices') || '[]');
                selectedServices.splice(index, 1);
                localStorage.setItem('selectedServices', JSON.stringify(selectedServices));
                updateCartDisplay();
            }
            
            // Initialize cart display
            updateCartDisplay();

            // Close cart when clicking outside
            document.addEventListener('click', (e) => {
                if (!selectedServicesPanel.classList.contains('hidden') &&
                    !selectedServicesPanel.contains(e.target) &&
                    !cartToggle.contains(e.target)) {
                    selectedServicesPanel.classList.add('hidden');
                }
            });
        });
    </script>
</body>
</html>